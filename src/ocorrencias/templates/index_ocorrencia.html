<!DOCTYPE html>
<html>
    <head>
        <title>Cadastro de ocorrências</title>
        <link rel="stylesheet" href="http://leafletjs.com/dist/leaflet.css"/>
        <script src="http://leafletjs.com/dist/leaflet.js"></script>


        <style>
            body {
                padding: 0;
                margin: 0;
            }

            html, body, #map {
                height: 100%;
            }
        </style>
    </head>
    <body>
    <div id="map"></div>

    <script>
        var map = L.map('map');

        L.tileLayer('http://{s}.tile.cloudmade.com/BC9A493B41014CAABB98F0471D759707/997/256/{z}/{x}/{y}.png', {
            maxZoom:18,
            attribution:'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="http://cloudmade.com">CloudMade</a>'
        }).addTo(map);

        function onLocationFound(e) {
            var radius = e.accuracy / 2;

            L.marker(e.latlng).addTo(map)
                    .bindPopup("Você está num raio de " + radius + " metros deste ponto").openPopup();
            L.circle(e.latlng, radius).addTo(map);
        }

        function onLocationError(e) {
            alert(e.message);
        }

        map.on('locationfound', onLocationFound);
        map.on('locationerror', onLocationError);

        map.locate({setView:true, maxZoom:16});
    </script>
    </body>
</html>
